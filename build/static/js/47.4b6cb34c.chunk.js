(this["webpackJsonpONE-dbc"]=this["webpackJsonpONE-dbc"]||[]).push([[47],{1285:function(e,t,a){"use strict";a.r(t);var n=a(8),r=a(6),c=a(3),l=a(2),s=a.n(l),o=a(0),u=a(515),i=a(480),d=a.n(i),b=a(35),p=a(127),m=a(91),f=a(331),j=a.n(f),O=a(23),h=a(160),x=a(62),g=a(59),v=a(17),y=a(39),k=a(20),w=a(29),N=a(138),S=a(27),T=a(32),P=a(14),I=a(1),C=function(e){var t=e.closeDialog,a=e.dialogOpen,l=e.onSetNotification,i=e.userId,f=Object(N.a)(),C=Object(S.b)(),A=Object(T.a)(),V=Object(w.b)(),W=Object(k.b)().languageVars.pages.editProfile;d.a.setApiKey(P.m);var q=Object(o.useState)(!1),E=Object(c.a)(q,2),F=E[0],M=E[1],B=Object(o.useState)(!1),D=Object(c.a)(B,2),U=D[0],L=D[1],J=Object(o.useState)(!1),K=Object(c.a)(J,2),R=K[0],z=K[1],G=Object(o.useState)("Loading"),H=Object(c.a)(G,2),Z=H[0],Q=H[1],X=Object(o.useState)(!1),Y=Object(c.a)(X,2),$=Y[0],_=Y[1],ee=Object(o.useState)(null),te=Object(c.a)(ee,2),ae=te[0],ne=te[1],re=Object(o.useState)(null),ce=Object(c.a)(re,2),le=ce[0],se=ce[1],oe=Object(o.useState)(!1),ue=Object(c.a)(oe,2),ie=ue[0],de=ue[1],be={email:Object(v.b)("input",W.forms.contactTab.email,{type:"text",name:"email",placeholder:W.forms.contactTab.email},"",null,{required:!1},!0,{xs:12,sm:null,md:null,lg:null,xl:null,fullWidth:!0}),workPhone:Object(v.b)("input",W.forms.contactTab.workPhone,{type:"tel",name:"workPhone",placeholder:W.forms.contactTab.workPhone},"",null,{required:!1,onlyNumber:!0},!0,{xs:12,sm:null,md:null,lg:null,xl:null,fullWidth:!0}),workFax:Object(v.b)("input",W.forms.contactTab.workFax,{type:"tel",name:"workfax",placeholder:W.forms.contactTab.workFax},"",null,{required:!1,onlyNumber:!0},!0,{xs:12,sm:null,md:null,lg:null,xl:null,fullWidth:!0}),homePhone:Object(v.b)("input",W.forms.contactTab.homePhone,{type:"tel",name:"homePhone",placeholder:W.forms.contactTab.homePhone,help:W.forms.contactTab.homePhoneHelp},"",null,{required:!1,onlyNumber:!0},!0,{xs:12,sm:null,md:null,lg:null,xl:null,fullWidth:!0}),address:Object(v.b)("input",W.forms.contactTab.address,{type:"text",name:"address",placeholder:W.forms.contactTab.address,disabled:!1},"",null,{required:!1},!0,{xs:12,sm:null,md:null,lg:null,xl:null,fullWidth:!0})},pe=Object(o.useState)(Object(r.a)({},be)),me=Object(c.a)(pe,2),fe=me[0],je=me[1];Object(o.useEffect)((function(){var e=!0;return e&&i&&Object(n.a)(s.a.mark((function e(){var t,a;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,z(!0),e.next=4,Object(y.k)(i);case 4:t=e.sent,ne(t),t.marker&&se(t.marker),a=Object(v.a)(fe,t,null),je((function(e){return Object(r.a)(Object(r.a)({},e),a.adjustedForm)})),M(a.formValid),z(!1),e.next=16;break;case 13:throw e.prev=13,e.t0=e.catch(0),new Error(e.t0);case 16:case"end":return e.stop()}}),e,null,[[0,13]])})))(),function(){e=!1}}),[i]);var Oe,he=function(){var e=Object(n.a)(s.a.mark((function e(t,a){var n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(r=t)||(r=""),n=Array.isArray(r)?r.join():Number.isInteger(r)?String(r):r,c=Object(v.a)(fe,n,a),je(c.adjustedForm),M(c.formValid),L(!0),_(!1);case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),xe=function(){var e=Object(n.a)(s.a.mark((function e(t){var a,n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return de(!1),e.prev=1,e.next=4,d.a.fromAddress(t);case 4:return a=e.sent,n=a.results[0].geometry.location,r=n.lat,c=n.lng,e.abrupt("return",{lat:r,lng:c});case 9:e.prev=9,e.t0=e.catch(1),console.log(e.t0),de(!0);case 13:return e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=Object(n.a)(s.a.mark((function e(t){var a,n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),de(!1),e.prev=2,a=Object(v.c)(fe),n=a.address,e.next=7,xe(n);case 7:(r=e.sent)&&se(r),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),de(!0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),ve=function(){je(be),se(null),de(!1),t()},ye=function(){var e=Object(n.a)(s.a.mark((function e(t){var a,n,c,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),z(!0),a=Object(v.c)(fe),!(n=a.address)||""===n){e.next=9;break}return e.next=7,xe(n);case 7:(c=e.sent)?(se(c),a.marker=c):a.marker=null;case 9:return o=Object(r.a)(Object(r.a)({},ae),a),e.prev=10,Q(W.messages.loading.updatingVcard),e.next=14,Object(y.u)(i,o);case 14:_(!0),L(!1),z(!1),l({message:W.messages.notifications.profileInfoUpdateSuccess,type:"success"}),ve(),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(10),z(!1),l({message:W.messages.notifications.profileInfoUpdateError,type:"error"});case 25:case"end":return e.stop()}}),e,null,[[10,21]])})));return function(t){return e.apply(this,arguments)}}(),ke=$||U&&!F||!U||R;return console.log(ae),Object(I.jsx)(h.a,{open:a,onClose:ve,title:"".concat(ae&&ae.firstName?ae.firstName:""," ").concat(ae&&ae.lastName?ae.lastName:""," Contacts"),loading:!1,actionButtonOne:Object(I.jsx)(m.a,{color:"secondary",onClick:function(e){return ye(e)},disabled:ke,className:A.defaultButton,style:{backgroundColor:!ke&&V},children:W.buttons.updateContact}),children:Object(I.jsx)(b.a,{children:R?Object(I.jsx)(O.a,{loadingText:"".concat(U?Z:W.messages.loading.loadingProfileInfo)}):Object(I.jsx)(b.a,{children:Object(I.jsxs)(b.a,{className:"".concat(C.panel),children:[Object(I.jsx)(p.a,{container:!0,spacing:3,children:(Oe=fe,Object.keys(Oe).map((function(e,t){return Object(I.jsx)(x.a,{elementType:Oe[e].elementType,label:Oe[e].elementLabel,value:Oe[e].value,elementOptions:Oe[e].elementOptions,touched:Oe[e].touched,valid:Oe[e].isValid,errorMessage:Oe[e].errorMessage,shouldValidate:Oe[e].validtationRules,elementSetup:Oe[e].elementSetup,changed:function(t){return he(t,e)},grid:Oe[e].grid,disabled:R},e+t)})))}),Object(I.jsx)(b.a,{display:"flex",flexDirection:"column",alignItems:"center",children:Object(I.jsx)(m.a,{color:"secondary",onClick:function(e){return ge(e)},className:"".concat(A.defaultButton," ").concat(C.panelButton),disabled:(!fe.address.value||""===fe.address.value)&&!le,children:W.buttons.showOnMap})}),ie&&Object(I.jsx)(b.a,{mt:2,children:Object(I.jsx)(g.a,{title:W.messages.notifications.wrongAddress.title,description:W.messages.notifications.wrongAddress.body,type:"warning"})}),le&&!ie&&Object(I.jsx)(b.a,{className:f.mapContainer,children:Object(I.jsx)(u.a,{bootstrapURLKeys:{key:P.m},yesIWantToUseGoogleMapApiInternals:!0,defaultCenter:le,defaultZoom:15,children:Object(I.jsx)(j.a,{style:{color:"#272727",fontSize:36},className:f.mapMarker,lat:le.lat,lng:le.lng})})})]})})})})};C.defaultProps={dialogOpen:!1,userId:null},t.default=C}}]);