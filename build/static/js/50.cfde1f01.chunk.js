(this["webpackJsonpONE-dbc"]=this["webpackJsonpONE-dbc"]||[]).push([[50],{1328:function(e,t,n){"use strict";n.r(t);var a=n(12),c=n(6),i=n(8),s=n(3),r=n(2),o=n.n(r),l=n(0),u=n(299),d=n.n(u),b=n(35),f=n(1219),j=n(1241),p=n(1223),O=n(23),m=n(160),k=n(28),g=n(91),h=n(53),v=n(30),L=n(668),x=n(669),S=n(553),y=n(59),w=n(17),T=n(32),E=n(27),C=n(92),N=n(29),D=n(20),P=n(16),A=n(14),B=n(1),I=function(e){var t=e.links,n=e.setLinks,r=e.loading,u=e.error,d=e.setUserInfo,f=e.onDeleteCustomLink,j=e.onSetNotification,p=e.socialLinksOrder,m=e.onSort,k=e.onCustomSort,P=e.redirect,I=e.setRedirect,U=e.defaultLinksToTheme,V=e.socialLinksSorted,R=e.customLinksSorted,z=e.onUpdateSocialLinks,F=e.onSortSocialLinks,M=e.onSortCustomLinks,_=e.onAddCustomLink,q=e.profileLinks,H=e.disableActions,J=Object(C.m)(),W=Object(T.a)(),$=Object(E.b)(),Q=Object(N.b)(),G=Object(D.b)().languageVars.pages.editProfile,K=Object(l.useState)(!1),X=Object(s.a)(K,2),Y=X[0],Z=X[1],ee=Object(l.useState)(!1),te=Object(s.a)(ee,2),ne=te[0],ae=te[1],ce=Object(l.useState)("#clink"===window.location.hash),ie=Object(s.a)(ce,2),se=ie[0],re=ie[1],oe=Object(l.useState)(!1),le=Object(s.a)(oe,2),ue=le[0],de=le[1],be=Object(l.useState)({linkTitle:Object(w.b)("input","".concat(G.forms.customLinks.linkTitle,"*"),{type:"text",name:"linkTitle",placeholder:"".concat(G.forms.customLinks.linkTitle,"*")},"",null,{required:!0},!1,{xs:12,sm:null,md:null,lg:null,xl:null,fullWidth:!0}),link:Object(w.b)("input","".concat(G.forms.customLinks.link,"*"),{type:"text",name:"link",placeholder:"".concat(G.forms.customLinks.link,"*")},"",null,{required:!0},!1,{xs:12,sm:null,md:null,lg:null,xl:null,fullWidth:!0})}),fe=Object(s.a)(be,2),je=fe[0],pe=fe[1];Object(l.useEffect)((function(){var e=function(){re("#clink"===window.location.hash)};return window.addEventListener("hashchange",e),function(){return window.removeEventListener("hashchange",e)}}),[]);var Oe=function(e){return e.replace(/ /g,"")},me=function(e){var t=A.E.findIndex((function(t){return t.platform===e}));return A.E[t].domain||null},ke=function(e,t){var n,a=(n=e,!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(n)),c=function(e,t){var n=me(e);if(n){var a=n.substring(0,n.indexOf("."));return t.includes(a)}return!1}(t,e);return{isValidURL:a,platformDomainExists:c,linkProtocolExists:"https://"===e.substring(0,8)||"http://"===e.substring(0,7)}},ge=function(e,i,s){var r=Object(c.a)(Object(c.a)({},t),{},{social:Object(a.a)(t.social)}),o=Object(w.d)(i,s),l=r.social.map((function(t){var n=Object(c.a)({},t);return t.platform===e&&(n.link=i,n.touched=!0,n.valid=o.isValid,n.errorMessage=o.errorMessage),n}));n((function(e){return Object(c.a)(Object(c.a)({},e),{},{custom:t.custom?Object(a.a)(t.custom):[],social:l})}))},he=function(e){var i,s;i=t&&t.custom?"custom"===e.platform?[].concat(Object(a.a)(t.custom),[e]):Object(a.a)(t.custom):"custom"===e.platform?[e]:[],s=t&&t.social?"custom"!==e.platform&&"menu"!==e.platform?[].concat(Object(a.a)(t.social),[e]):Object(a.a)(t.social):"custom"!==e.platform&&"menu"!==e.platform?[e]:[],n((function(e){return Object(c.a)(Object(c.a)({},e),{},{custom:i,social:s})}))},ve=function(e,t){!function(e){I(e)}(e.target.checked?t:null),d((function(e){return Object(c.a)(Object(c.a)({},e),{},{redirect:t})}))},Le=function(){var e=Object(i.a)(o.a.mark((function e(n){var i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),(i=Object(w.c)(je)).active=!0,i.touched=!0,i.valid=!0,i.key=t&&t.custom&&t.custom.length>0?Math.max.apply(Math,Object(a.a)(t.custom.map((function(e){return e.key}))))+1:1,i.platform="custom",pe((function(e){return Object(c.a)(Object(c.a)({},e),{},{link:Object(c.a)(Object(c.a)({},e.link),{},{value:"",isValid:!1,touched:!1}),linkTitle:Object(c.a)(Object(c.a)({},e.linkTitle),{},{isValid:!1,touched:!1,value:""})})})),ae(!1),Z(!1),he(i),_(n,i),window.history.back(),u&&j({message:G.messages.notifications.profileLinksUpdateError,type:"error"});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(B.jsxs)(B.Fragment,{children:[(V||R)&&Object(B.jsx)(y.a,{title:G.messages.notifications.linkOrderChanged.title,description:G.messages.notifications.linkOrderChanged.description,type:"warning"}),Object(B.jsxs)(b.a,{className:$.panel,children:[Object(B.jsx)(v.a,{title:G.data.titles.customLinks}),Object(B.jsx)(b.a,{mb:2,children:Object(B.jsx)(h.a,{variant:"body1",align:"left",component:"p",className:$.panelText,children:G.data.description.customLinksPanel})}),t&&t.custom&&t.custom.length>0&&Object(B.jsx)(b.a,{mt:2,children:Object(B.jsx)(x.a,{onLinkDelete:f,links:t,redirect:P,onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;t!==n&&k(t,n)},onLinkRedirect:ve,disableActions:H,useDragHandle:!0})}),Object(B.jsx)(g.a,{className:"".concat(W.defaultButton," ").concat($.panelButton),onClick:function(){window.location.hash="#clink"},style:{backgroundColor:Q.color.code},disabled:H,children:G.buttons.addCustomLink}),R&&Object(B.jsx)(b.a,{className:$.stickyPanelButton,children:Object(B.jsx)(g.a,{className:"".concat(W.defaultButton," ").concat($.panelButton),onClick:function(e){return M(e)},style:{backgroundColor:Q.color.code},disabled:!R||H,children:G.buttons.updateLinksOrder})}),Object(B.jsx)(S.a,{open:se,onClose:function(){pe((function(e){return Object(c.a)(Object(c.a)({},e),{},{link:Object(c.a)(Object(c.a)({},e.link),{},{value:"",isValid:!1,touched:!1}),linkTitle:Object(c.a)(Object(c.a)({},e.linkTitle),{},{isValid:!1,touched:!1,value:""})})})),window.history.back()},formElements:je,onChange:function(e,t){var n;n=Array.isArray(e)?e.join():Number.isInteger(e)?String(e):e;var a=Object(w.a)(je,n,t);pe(a.adjustedForm),Z(a.formValid),ae(!0)},onBlur:function(e,t){if("link"===t){var n=e.target.value;"https://"===n.substring(0,8)||"http://"===n.substring(0,7)||(e.target.value="http://".concat(n));var a=Object(w.a)(je,e,t);pe(a.adjustedForm),Z(a.formValid),ae(!0)}},onAddCustomLink:Le,formValid:Y,formTouched:ne,color:Q.color.code,disableActions:H})]}),Object(B.jsxs)(b.a,{className:"".concat($.panel),children:[Object(B.jsx)(v.a,{title:G.data.titles.basicLinks}),Object(B.jsx)(b.a,{mb:2,children:Object(B.jsx)(h.a,{variant:"body1",align:"left",component:"p",className:$.panelText,children:G.data.description.socialLinksPanel})}),Object(B.jsxs)(b.a,{className:J.linksContainer,children:[r&&Object(B.jsx)(O.a,{loadingText:G.messages.loading.loadingLinks}),Object(B.jsx)(L.a,{socialLinks:p,links:t&&t.social?t.social:p,profileLinks:q?q.filter((function(e){return"custom"!==e.platform})):null,redirect:P,defaultLinksToTheme:U,onToggleDefaultLinksToTheme:function(){return!0},loading:r,onLinkChange:function(e,t,n){var a=Oe(e.target.value);""===a&&"http://"===a&&"https://"===a||ge(t,a,n)},onLinkBlur:function(e,t,n){var a=Oe(e.target.value),c=ke(a,t);if(c.isValidURL&&c.platformDomainExists&&!c.linkProtocolExists)a="https://".concat(a);else if(""!==a&&!c.platformDomainExists&&!c.linkProtocolExists){var i=me(t),s=a.replace(/[#^+()$~'":*<>{}!@]/g,"");a=i?"https://".concat(i,"/").concat(s):"https://".concat(s)}ge(t,a,n)},onLinkToggle:function(e,i,s){return function(){var e=(t&&t.social?t.social:p).filter((function(e){return e.platform===i})).length>0;if(s)return function(e){var i=Object(a.a)(t.social).findIndex((function(t){return t.platform===e})),s=Object(a.a)(t.social);i>-1&&(s[i].active=!1),n((function(e){return Object(c.a)(Object(c.a)({},e),{},{social:s})}))}(i),void de(!0);if(t&&t.social&&e)!function(e){var i=Object(a.a)(t.social).findIndex((function(t){return t.platform===e})),s=Object(a.a)(t.social),r=s[i];s[i].active=!r.active,n((function(e){return Object(c.a)(Object(c.a)({},e),{},{social:s})}))}(i);else{var r={active:!0,touched:!1,valid:!1,saved:!0,link:"",key:A.E.filter((function(e){return e.platform===i}))[0].key,platform:i};he(r)}}},onLinkRedirect:ve,onSortEnd:function(e){var t=e.oldIndex,n=e.newIndex;t!==n&&m(t,n)},axis:"xy",pressDelay:100,onUpdateSocialLinks:z,linkClosed:ue,disableActions:H})]}),V&&Object(B.jsx)(b.a,{className:$.stickyPanelButton,children:Object(B.jsx)(g.a,{className:"".concat(W.defaultButton," ").concat($.panelButton),onClick:function(e){return F(e)},style:{backgroundColor:Q.color.code},disabled:!V||H,children:G.buttons.updateLinksOrder})})]})]})};I.defaultProps={links:null,profileLinks:null,redirect:null,socialLinksOrder:null,loading:!1,error:!1,defaultLinksToTheme:!1,socialLinksSorted:!1,customLinksSorted:!1,disableActions:!1};var U=Object(k.b)(null,(function(e){return{onSetNotification:function(t){return e(P.Q(t))},onToggleDefaultLinksToTheme:function(){return e(P.r())}}}))(I),V=n(554),R=n(39),z=n(138);function F(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var M=function(e){var t=e.closeDialog,n=e.dialogOpen,r=e.onSetNotification,u=e.userId,k=Object(N.b)(),g=Object(z.a)(),h=Object(E.b)(),v=Object(D.b)().languageVars.pages.editProfile,L=Object(l.useState)(!1),x=Object(s.a)(L,2),S=x[0],y=x[1],w=Object(l.useState)(!1),T=Object(s.a)(w,2),C=T[0],P=T[1],I=Object(l.useState)(v.messages.loading.updatingProfileLinks),M=Object(s.a)(I,2),_=M[0],q=M[1],H=Object(l.useState)(null),J=Object(s.a)(H,2),W=J[0],$=J[1],Q=Object(l.useState)(0),G=Object(s.a)(Q,2),K=G[0],X=G[1],Y=Object(l.useState)(!1),Z=Object(s.a)(Y,2),ee=Z[0],te=Z[1],ne=Object(l.useState)(!1),ae=Object(s.a)(ne,2),ce=ae[0],ie=ae[1],se=Object(l.useState)(null),re=Object(s.a)(se,2),oe=re[0],le=re[1],ue=Object(l.useState)(null),de=Object(s.a)(ue,2),be=de[0],fe=de[1],je=Object(l.useState)(null),pe=Object(s.a)(je,2),Oe=pe[0],me=pe[1];Object(l.useEffect)((function(){var e=!0;return e&&u&&Object(i.a)(o.a.mark((function e(){var t,n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,P(!0),e.next=4,Object(R.k)(u);case 4:t=e.sent,me(t),t.links&&(n=t.links.reduce((function(e,t){var n=t;n.saved=!0,n.originalLink=n.link,n.originalActive=n.active;var a=e,c="custom"===n.platform||"menu"===n.platform?n.platform:"social";return e[c]||(a[c]=[]),a[c].push(n),a}),{}),le(n)),t.redirect&&fe(t.redirect),t.socialLinksOrder?(a=t.socialLinksOrder.concat(A.E.filter((function(e){return t.socialLinksOrder.map((function(e){return e.platform})).indexOf(e.platform)<0}))),$(a)):$(A.E),P(!1),e.next=15;break;case 12:throw e.prev=12,e.t0=e.catch(0),new Error(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))(),function(){e=!1}}),[u]);var ke=function(e){var t=Object(c.a)({},Oe),n=t.links?Object(a.a)(t.links):[],i=Object(c.a)({},e);i.originallyActive=i.active;var s,r=t.links?t.links.findIndex((function(t){return t.platform===e.platform})):-1;return 0===r||r>-1?(n[r]=i,s=Object(a.a)(n)):s=[].concat(Object(a.a)(n),[i]),s},ge=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var a,i,s;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),P(!0),a=Object(c.a)({},Oe),i=ke(n),s=Object(c.a)(Object(c.a)({},a),{},{links:i}),e.prev=5,q(v.messages.loading.updatingLinks),e.next=9,Object(R.u)(u,s);case 9:me((function(e){return{prevState:e,links:i}})),y(!1),P(!1),r({message:v.messages.notifications.profileLinksUpdateSuccess,type:"success"}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r({message:v.messages.notifications.profileLinksUpdateError,type:"error"});case 18:case"end":return e.stop()}}),e,null,[[5,15]])})));return function(t,n){return e.apply(this,arguments)}}(),he=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var i,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),P(!0),y(!0),i=Object(c.a)({},Oe),s=i.links&&i.links.length>0?i.links.filter((function(e){return""!==e.link&&"http://"!==e.link&&"https://"!==e.link})):null,l=Object(c.a)(Object(c.a)({},i),{},{links:s?[].concat(Object(a.a)(s),[Object(c.a)({},n)]):[Object(c.a)({},n)]}),e.prev=6,q(v.messages.loading.addingLink),e.next=10,Object(R.u)(u,l);case 10:me((function(e){return Object(c.a)(Object(c.a)({},e),{},{links:s?[].concat(Object(a.a)(s),[n]):[n]})})),y(!1),P(!1),r({message:v.messages.notifications.profileLinksUpdateSuccess,type:"success"}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(6),r({message:v.messages.notifications.profileLinksUpdateError,type:"error"});case 19:case"end":return e.stop()}}),e,null,[[6,16]])})));return function(t,n){return e.apply(this,arguments)}}(),ve=function(e){var t=oe.custom?Object(a.a)(oe.custom):null,n=t?t.filter((function(t){return t.key!==e})):null;le((function(e){return Object(c.a)(Object(c.a)({},e),{},{custom:n})}))},Le=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var a,i,s,l;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),!0!==window.confirm(v.messages.notifications.deleteLinkPrompt)){e.next=23;break}return y(!0),q(v.messages.loading.deletingProfileLinks),P(!0),a=Object(c.a)({},Oe),i=a.links&&a.links.length>0?a.links.filter((function(e){return""!==e.link&&"http://"!==e.link&&"https://"!==e.link})):null,s=i.filter((function(e){return e.key!==n})),l=Object(c.a)(Object(c.a)({},a),{},{links:s}),e.prev=10,e.next=13,Object(R.u)(u,l);case 13:me((function(e){return Object(c.a)(Object(c.a)({},e),{},{links:s})})),ve(n),y(!1),P(!1),r({message:v.messages.notifications.profileLinkDeletedSuccess,type:"success"}),e.next=23;break;case 20:e.prev=20,e.t0=e.catch(10),r({message:v.messages.notifications.profileLinkDeletedError,type:"error"});case 23:case"end":return e.stop()}}),e,null,[[10,20]])})));return function(t,n){return e.apply(this,arguments)}}(),xe=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.preventDefault(),P(!0),n=Object(c.a)({},Oe),a=Object(c.a)(Object(c.a)({},n),{},{socialLinksOrder:W}),e.prev=4,q(v.messages.loading.sortingLinks),e.next=8,Object(R.u)(u,a);case 8:me((function(e){return Object(c.a)(Object(c.a)({},e),{},{socialLinksOrder:W})})),y(!1),te(!1),P(!1),r({message:v.messages.notifications.profileLinksSortSuccess,type:"success"}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(4),r({message:v.messages.notifications.profileLinksSortError,type:"error"});case 18:case"end":return e.stop()}}),e,null,[[4,15]])})));return function(t){return e.apply(this,arguments)}}(),Se=function(){var e=Object(i.a)(o.a.mark((function e(t){var n,i,s,l,d,b;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),P(!0),n=Object(c.a)({},Oe),i=n.links&&n.links.length>0?n.links.filter((function(e){return""!==e.link&&"http://"!==e.link&&"https://"!==e.link})):null,s=i?i.filter((function(e){return"custom"!==e.platform})):null,l=Object(a.a)(oe.custom),d=[].concat(Object(a.a)(s),Object(a.a)(l)),b=Object(c.a)(Object(c.a)({},n),{},{links:d}),e.prev=8,q(v.messages.loading.sortingLinks),e.next=12,Object(R.u)(u,b);case 12:me((function(e){return Object(c.a)(Object(c.a)({},e),{},{links:d})})),y(!1),ie(!1),P(!1),r({message:v.messages.notifications.profileLinksSortSuccess,type:"success"}),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(8),r({message:v.messages.notifications.profileLinksSortError,type:"error"});case 22:case"end":return e.stop()}}),e,null,[[8,19]])})));return function(t){return e.apply(this,arguments)}}(),ye=function(){var e=Object(i.a)(o.a.mark((function e(t,n){var a,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t&&t.preventDefault(),P(!0),a=Object(c.a)({},Oe),i=Object(c.a)(Object(c.a)({},a),{},{redirect:n}),e.prev=4,q(v.messages.loading.redirectingProfile),e.next=8,Object(R.u)(u,i);case 8:fe(n),y(!1),P(!1),r({message:v.messages.notifications.profileLinksRedirectedSuccess,type:"success"}),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),r({message:v.messages.notifications.profileLinksRedirectedError,type:"error"});case 17:case"end":return e.stop()}}),e,null,[[4,14]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(B.jsx)(m.a,{open:n,onClose:function(){t()},title:"".concat(Oe&&Oe.firstName?Oe.firstName:""," ").concat(Oe&&Oe.lastName?Oe.lastName:""," Links"),loading:!1,children:Object(B.jsx)(b.a,{children:C?Object(B.jsx)(O.a,{loadingText:"".concat(S?_:v.messages.loading.loadingLinks)}):Object(B.jsxs)(b.a,{className:g.root,children:[Object(B.jsx)(f.a,{position:"relative",className:h.tabsHeader,children:Object(B.jsxs)(j.a,{value:K,onChange:function(e,t){X(t)},"aria-label":"links tabs",centered:!0,TabIndicatorProps:{style:{backgroundColor:k.color.code}},children:[Object(B.jsx)(p.a,Object(c.a)({label:v.data.tabs.addLinks,className:"".concat(h.tabButton," ").concat(h.tabButtonLeft),style:{paddingTop:20}},F(0))),Object(B.jsx)(p.a,Object(c.a)({label:Object(B.jsx)(B.Fragment,{children:v.data.tabs.redirectProfile}),className:"".concat(h.tabButton," ").concat(h.tabButtonRight),style:{paddingTop:20}},F(1)))]})}),Object(B.jsx)("div",{role:"tabpanel",hidden:0!==K,id:"simple-tabpanel-0",className:h.tabPanelContainer,"aria-labelledby":"simple-tab-0",children:0===K&&Object(B.jsx)(U,{links:oe,setLinks:le,profileLinks:Oe&&Oe.links,redirect:be,setRedirect:fe,setUserInfo:me,loading:C,socialLinksOrder:W,onSort:function(e,t){e!==t&&(y(!0),te(!0),$(d()(W,e,t)))},onCustomSort:function(e,t){e!==t&&(y(!0),ie(!0),function(e,t){var n=Object(a.a)(oe.custom);le((function(a){return Object(c.a)(Object(c.a)({},a),{},{custom:d()(n,e,t)})}))}(e,t))},defaultLinksToTheme:Oe&&Oe.defaultLinksToTheme,onUpdateSocialLinks:ge,socialLinksSorted:ee,customLinksSorted:ce,onSortSocialLinks:xe,onSortCustomLinks:Se,onDeleteCustomLink:Le,onAddCustomLink:he,disableActions:C})}),Object(B.jsx)("div",{role:"tabpanel",hidden:1!==K,id:"simple-tabpanel-1",className:h.tabPanelContainer,"aria-labelledby":"simple-tab-1",children:1===K&&Object(B.jsx)(V.a,{color:k.color.code,links:oe,redirect:be,defaultLinksToTheme:Oe&&Oe.defaultLinksToTheme,onRedirect:ye,disableActions:C})})]})})})};M.defaultProps={dialogOpen:!1,userId:null};t.default=M}}]);