(this["webpackJsonpONE-dbc"]=this["webpackJsonpONE-dbc"]||[]).push([[42],{1314:function(e,t,n){"use strict";n.r(t);var a=n(8),o=n(6),l=n(3),c=n(2),r=n.n(c),i=n(0),s=n(28),u=n(35),m=n(127),d=n(91),b=n(62),f=n(23),g=n(160),p=n(138),j=n(32),O=n(17),h=n(20),x=n(33),N=n(75),v=n(16),y=n(1),k=function(e){var t=e.open,n=e.onClose,c=e.connection,s=e.onSetNotification,v=e.onUpdateConnection,k=e.color,S=e.userId,w=Object(p.a)(),C=Object(j.a)(),D=Object(x.b)(),E=Object(h.b)(),P=E.languageVars.pages.connections,I=E.languageVars.pages.viewProfile,V=Object(i.useState)(!1),q=Object(l.a)(V,2),T=q[0],W=q[1],B=Object(i.useState)(!1),A=Object(l.a)(B,2),F=A[0],J=A[1],M=Object(i.useState)(!1),U=Object(l.a)(M,2),L=U[0],Q=U[1],R=Object(i.useState)(P.messages.loading.loadingConnectionInfo),z=Object(l.a)(R,2),G=z[0],H=z[1],K=Object(i.useState)(!1),X=Object(l.a)(K,2),Y=X[0],Z=X[1],$=Object(i.useState)(!1),_=Object(l.a)($,2),ee=_[0],te=_[1],ne=Object(i.useState)({firstName:Object(O.b)("input","".concat(I.forms.connectDialog.firstName,"*"),{type:"text",name:"firstName",placeholder:"".concat(I.forms.connectDialog.firstName,"*"),tag:"text"},c&&c.firstName?c.firstName:"",null,{required:!0},!1,{xs:6,sm:null,md:null,lg:null,xl:null,fullWidth:!0}),lastName:Object(O.b)("input","".concat(I.forms.connectDialog.lastName),{type:"text",name:"lastName",placeholder:"".concat(I.forms.connectDialog.lastName),tag:"text"},c&&c.lastName?c.lastName:"",null,{required:!1},!1,{xs:6,sm:null,md:null,lg:null,xl:null,fullWidth:!0}),workPhone:Object(O.b)("input","".concat(I.forms.connectDialog.phone,"*"),{type:"tel",name:"workPhone",placeholder:"".concat(I.forms.connectDialog.phone,"*"),tag:"phone"},c&&c.workPhone?c.workPhone:"",null,{required:!0,phoneNumber:!0},!1,{xs:12,sm:null,md:null,lg:null,xl:null,fullWidth:!0}),email:Object(O.b)("input","".concat(I.forms.connectDialog.email),{type:"email",name:"email",placeholder:"".concat(I.forms.connectDialog.email),tag:"email"},c&&c.email?c.email:"",null,{required:!1},!1,{xs:12,sm:null,md:null,lg:null,xl:null,fullWidth:!0}),note:Object(O.b)("textarea",I.forms.connectDialog.note,{type:"text",name:"note",placeholder:I.forms.connectDialog.note,tag:"text"},c&&c.note?c.note:"",null,{required:!1},!0,{xs:12,sm:null,md:null,lg:null,xl:null,fullWidth:!0})}),ae=Object(l.a)(ne,2),oe=ae[0],le=ae[1];Object(i.useEffect)((function(){if(c){var e=Object(O.a)(oe,c,null);le((function(t){return Object(o.a)(Object(o.a)({},t),e.adjustedForm)})),W(e.formValid)}}),[D.user.uid,c]);var ce=function(){var e=Object(a.a)(r.a.mark((function e(t){var a,o;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),H(P.messages.loading.updatingConnectionInfo),Z(!1),te(!0),a=Object(O.c)(oe),""!==(o=a.workPhone).trim()&&"+"!==o.trim()){e.next=10;break}return te(!1),J(!1),e.abrupt("return");case 10:return e.prev=10,a.userName="".concat(a.firstName||""," ").concat(a.lastName||""),e.next=14,Object(N.n)(S,c.id,a);case 14:v(c.id,a),J(!1),Z(!0),setTimeout((function(){return te(!1)}),1e3),setTimeout((function(){return n()}),1100),H(P.messages.loading.loadingConnectionInfo),s({message:P.messages.notifications.connectionEditSuccess,type:"success"}),e.next=30;break;case 23:throw e.prev=23,e.t0=e.catch(10),Z(!0),te(!1),n(),s({message:P.messages.notifications.connectionEditError,type:"error"}),new Error(e.t0);case 30:case"end":return e.stop()}}),e,null,[[10,23]])})));return function(t){return e.apply(this,arguments)}}(),re=function(){n()},ie=L||F&&!T||!F||ee;return Object(y.jsx)(g.a,{title:"Edit ".concat(c&&c.firstName," ").concat(c&&c.lastName&&c.lastName),open:t&&!!c,onClose:function(){return re()},titleBackground:k,actionButtonOne:Object(y.jsx)(d.a,{color:"secondary",onClick:function(e){return ce(e)},disabled:ie,className:C.defaultButton,style:{backgroundColor:!ie&&k},children:P.buttons.editConnection}),children:Object(y.jsxs)(u.a,{className:"".concat(w.dialogContent),children:[ee&&Object(y.jsx)(f.a,{done:Y,loadingText:G}),Object(y.jsx)(m.a,{container:!0,spacing:3,children:Object.keys(oe).map((function(e,t){return Object(y.jsx)(b.a,{elementType:oe[e].elementType,label:oe[e].elementLabel,value:oe[e].value,elementOptions:oe[e].elementOptions,touched:oe[e].touched,valid:oe[e].isValid,shouldValidate:oe[e].validtationRules,elementSetup:oe[e].elementSetup,errorMessage:oe[e].errorMessage,changed:function(t){return function(e,t){var n;n=Array.isArray(e)?e.join():Number.isInteger(e)?String(e):e;var a=Object(O.a)(oe,n,t);le(a.adjustedForm),W(a.formValid),J(!0),Q(!1)}(t,e)},grid:oe[e].grid,disabled:ee},e+t)}))})]})})};k.defaultProps={open:!1,connection:null,color:null,userId:null},t.default=Object(s.b)(null,(function(e){return{onSetNotification:function(t){return e(v.Q(t))},onUpdateConnection:function(t,n){return e(v.eb(t,n))}}}))(k)}}]);